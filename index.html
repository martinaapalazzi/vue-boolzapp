<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>


    <div id="app">

        <div class="background-container">

            <div class="app-container">

                <div class="aside-container">

                    <div class="header-aside">
                        <div class="boolzapp-user">
                            <img class="profile-pics" src="img/avatar_io.jpg" alt="">
                            <h3>
                                Sofia
                            </h3>
                        </div>
                        <div class="grey-color">
                            <i class="fas fa-spinner"></i>
                            <i class="fas fa-comment-alt special-icon-mg"></i>
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>

                    <div class="main-aside">

                        <div class="notification-bar">
                            <div>
                                <i class="fa-solid fa-bell-slash" style="color: #ffffff;"></i>
                            </div>
                            <div>
                                <h4>
                                    Ricevi notifiche di nuovi messaggi
                                </h4>
                                <a href="">Attiva notifiche desktop</a>
                            </div>
                        </div>

                        <div class="search-bar">
                            <span>
                                <i class="fas fa-search grey-color"></i>
                            </span>
                            <input  type="search"
                                    placeholder="Cerca o inizia una nuova chat"
                                    class="search-input"
                                    v-model="lettersIncluded"
                                    @keyup="searchContact">
                        </div>
    
                        <div class="body-aside">
                            <ul class="list-style-none">
                                <li v-for="(contact, index) in contacts" :class=" index ==  currentChat ? 'active' : '' " @click.prevent="setCurrentChat(index)">
                                    <div class="single-contact" v-if="contact.visible == true">
                                        <div class="users-chats" >
                                            <img class="profile-pics" :src="contact.avatar" :alt="contact.name" />
                                            <div>
                                                <h4>
                                                    {{ contact.name }}
                                                </h4>
                                                <p>
                                                    ultimo messaggio
                                                </p>
                                            </div>
                                        </div>
                                        <div>
                                            <p class="time">
                                                12.00
                                            </p>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        
                    </div>

                </div>

                <div class="chat-container-right">
                    <div class="header-chat">
                        <div class="person-details">
                            <div>
                                <img class="profile-pics" :src="contacts[currentChat].avatar" alt="">
                            </div>
                            <div class="person-info">
                                <h3>
                                    {{ contacts[currentChat].name }}
                                </h3>
                                <p class="grey-color">
                                   Ultimo accesso oggi alle 12.00
                                </p>
                            </div>
                        </div>
                        <div class="grey-color">
                            <i class="fas fa-search"></i>
                            <i class="fas fa-paperclip special-icon-mg"></i>
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>


                    <div class="body-chat">

                        <!-- <img src="img/mine.jpg" alt=""> -->
                        
                        <div class="messages-container" v-for="message in contacts[currentChat].messages">

                            <div :class=" message.status == 'sent'  ? 'green-messages sent-messages' : 'white-messages received-messages' ">
                                {{ message.message }}
                            </div>

                        </div>

                    </div>

                    <div class="footer-chat">
                        <i class="far fa-smile grey-color"></i>
                        <input  type="text"
                                placeholder="Scrivi un messaggio"
                                class="search-input"
                                v-model="newMessage"
                                @keyup.enter="addNewMessage()">
                        <i class="fas fa-microphone grey-color"></i>
                    </div>



                </div>

            </div>




        </div>

    </div>


    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.5/axios.min.js" integrity="sha512-TjBzDQIDnc6pWyeM1bhMnDxtWH0QpOXMcVooglXrali/Tj7W569/wd4E8EDjk1CwOAOPSJon1VfcEt1BI4xIrA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="script.js"></script>
    
</body>
</html>